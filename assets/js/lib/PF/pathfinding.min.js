!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.PF=t()}}(function(){return function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){e.exports=t("./lib/heap")},{"./lib/heap":2}],2:[function(t,e,n){(function(){var t,n,r,o,i,s,a,u,l,h,p,f,c,d,g;r=Math.floor,h=Math.min,n=function(t,e){return t<e?-1:t>e?1:0},l=function(t,e,o,i,s){var a;if(null==o&&(o=0),null==s&&(s=n),o<0)throw new Error("lo must be non-negative");for(null==i&&(i=t.length);o<i;)a=r((o+i)/2),s(e,t[a])<0?i=a:o=a+1;return[].splice.apply(t,[o,o-o].concat(e)),e},s=function(t,e,r){return null==r&&(r=n),t.push(e),d(t,0,t.length-1,r)},i=function(t,e){var r,o;return null==e&&(e=n),r=t.pop(),t.length?(o=t[0],t[0]=r,g(t,0,e)):o=r,o},u=function(t,e,r){var o;return null==r&&(r=n),o=t[0],t[0]=e,g(t,0,r),o},a=function(t,e,r){var o;return null==r&&(r=n),t.length&&r(t[0],e)<0&&(o=[t[0],e],e=o[0],t[0]=o[1],g(t,0,r)),e},o=function(t,e){var o,i,s,a,u,l;for(null==e&&(e=n),a=function(){l=[];for(var e=0,n=r(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)l.push(e);return l}.apply(this).reverse(),u=[],i=0,s=a.length;i<s;i++)o=a[i],u.push(g(t,o,e));return u},c=function(t,e,r){var o;if(null==r&&(r=n),o=t.indexOf(e),o!==-1)return d(t,0,o,r),g(t,o,r)},p=function(t,e,r){var i,s,u,l,h;if(null==r&&(r=n),s=t.slice(0,e),!s.length)return s;for(o(s,r),h=t.slice(e),u=0,l=h.length;u<l;u++)i=h[u],a(s,i,r);return s.sort(r).reverse()},f=function(t,e,r){var s,a,u,p,f,c,d,g,v,y;if(null==r&&(r=n),10*e<=t.length){if(p=t.slice(0,e).sort(r),!p.length)return p;for(u=p[p.length-1],g=t.slice(e),f=0,d=g.length;f<d;f++)s=g[f],r(s,u)<0&&(l(p,s,0,null,r),p.pop(),u=p[p.length-1]);return p}for(o(t,r),y=[],a=c=0,v=h(e,t.length);0<=v?c<v:c>v;a=0<=v?++c:--c)y.push(i(t,r));return y},d=function(t,e,r,o){var i,s,a;for(null==o&&(o=n),i=t[r];r>e&&(a=r-1>>1,s=t[a],o(i,s)<0);)t[r]=s,r=a;return t[r]=i},g=function(t,e,r){var o,i,s,a,u;for(null==r&&(r=n),i=t.length,u=e,s=t[e],o=2*e+1;o<i;)a=o+1,a<i&&!(r(t[o],t[a])<0)&&(o=a),t[e]=t[o],e=o,o=2*e+1;return t[e]=s,d(t,u,e,r)},t=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=s,t.pop=i,t.replace=u,t.pushpop=a,t.heapify=o,t.updateItem=c,t.nlargest=p,t.nsmallest=f,t.prototype.push=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pop=function(){return i(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return this.nodes.indexOf(t)!==-1},t.prototype.replace=function(t){return u(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return a(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return o(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return c(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),("undefined"!=typeof e&&null!==e?e.exports:void 0)?e.exports=t:window.Heap=t}).call(this)},{}],3:[function(t,e,n){var r={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};e.exports=r},{}],4:[function(t,e,n){function r(t,e,n){var r;"object"!=typeof t?r=t:(e=t.length,r=t[0].length,n=t),this.width=r,this.height=e,this.nodes=this._buildNodes(r,e,n)}var o=t("./Node"),i=t("./DiagonalMovement");r.prototype._buildNodes=function(t,e,n){var r,i,s=new Array(e);for(r=0;r<e;++r)for(s[r]=new Array(t),i=0;i<t;++i)s[r][i]=new o(i,r);if(void 0===n)return s;if(n.length!==e||n[0].length!==t)throw new Error("Matrix size does not fit");for(r=0;r<e;++r)for(i=0;i<t;++i)n[r][i]&&(s[r][i].walkable=!1);return s},r.prototype.getNodeAt=function(t,e){return this.nodes[e][t]},r.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},r.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},r.prototype.setWalkableAt=function(t,e,n){this.nodes[e][t].walkable=n},r.prototype.getNeighbors=function(t,e){var n=t.x,r=t.y,o=[],s=!1,a=!1,u=!1,l=!1,h=!1,p=!1,f=!1,c=!1,d=this.nodes;if(this.isWalkableAt(n,r-1)&&(o.push(d[r-1][n]),s=!0),this.isWalkableAt(n+1,r)&&(o.push(d[r][n+1]),u=!0),this.isWalkableAt(n,r+1)&&(o.push(d[r+1][n]),h=!0),this.isWalkableAt(n-1,r)&&(o.push(d[r][n-1]),f=!0),e===i.Never)return o;if(e===i.OnlyWhenNoObstacles)a=f&&s,l=s&&u,p=u&&h,c=h&&f;else if(e===i.IfAtMostOneObstacle)a=f||s,l=s||u,p=u||h,c=h||f;else{if(e!==i.Always)throw new Error("Incorrect value of diagonalMovement");a=!0,l=!0,p=!0,c=!0}return a&&this.isWalkableAt(n-1,r-1)&&o.push(d[r-1][n-1]),l&&this.isWalkableAt(n+1,r-1)&&o.push(d[r-1][n+1]),p&&this.isWalkableAt(n+1,r+1)&&o.push(d[r+1][n+1]),c&&this.isWalkableAt(n-1,r+1)&&o.push(d[r+1][n-1]),o},r.prototype.clone=function(){var t,e,n=this.width,i=this.height,s=this.nodes,a=new r(n,i),u=new Array(i);for(t=0;t<i;++t)for(u[t]=new Array(n),e=0;e<n;++e)u[t][e]=new o(e,t,s[t][e].walkable);return a.nodes=u,a},e.exports=r},{"./DiagonalMovement":3,"./Node":6}],5:[function(t,e,n){e.exports={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var n=Math.SQRT2-1;return t<e?n*t+e:n*e+t},chebyshev:function(t,e){return Math.max(t,e)}}},{}],6:[function(t,e,n){function r(t,e,n){this.x=t,this.y=e,this.walkable=void 0===n||n}e.exports=r},{}],7:[function(t,e,n){function r(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}function o(t,e){var n=r(t),o=r(e);return n.concat(o.reverse())}function i(t){var e,n,r,o,i,s=0;for(e=1;e<t.length;++e)n=t[e-1],r=t[e],o=n[0]-r[0],i=n[1]-r[1],s+=Math.sqrt(o*o+i*i);return s}function s(t,e,n,r){var o,i,s,a,u,l,h=Math.abs,p=[];for(s=h(n-t),a=h(r-e),o=t<n?1:-1,i=e<r?1:-1,u=s-a;;){if(p.push([t,e]),t===n&&e===r)break;l=2*u,l>-a&&(u-=a,t+=o),l<s&&(u+=s,e+=i)}return p}function a(t){var e,n,r,o,i,a,u=[],l=t.length;if(l<2)return u;for(i=0;i<l-1;++i)for(e=t[i],n=t[i+1],r=s(e[0],e[1],n[0],n[1]),o=r.length,a=0;a<o-1;++a)u.push(r[a]);return u.push(t[l-1]),u}function u(t,e){var n,r,o,i,a,u,l,h,p,f,c,d=e.length,g=e[0][0],v=e[0][1],y=e[d-1][0],b=e[d-1][1];for(n=g,r=v,a=[[n,r]],u=2;u<d;++u){for(h=e[u],o=h[0],i=h[1],p=s(n,r,o,i),c=!1,l=1;l<p.length;++l)if(f=p[l],!t.isWalkableAt(f[0],f[1])){c=!0;break}c&&(lastValidCoord=e[u-1],a.push(lastValidCoord),n=lastValidCoord[0],r=lastValidCoord[1])}return a.push([y,b]),a}function l(t){if(t.length<3)return t;var e,n,r,o,i,s,a=[],u=t[0][0],l=t[0][1],h=t[1][0],p=t[1][1],f=h-u,c=p-l;for(i=Math.sqrt(f*f+c*c),f/=i,c/=i,a.push([u,l]),s=2;s<t.length;s++)e=h,n=p,r=f,o=c,h=t[s][0],p=t[s][1],f=h-e,c=p-n,i=Math.sqrt(f*f+c*c),f/=i,c/=i,f===r&&c===o||a.push([e,n]);return a.push([h,p]),a}n.backtrace=r,n.biBacktrace=o,n.pathLength=i,n.interpolate=s,n.expandPath=a,n.smoothenPath=u,n.compressPath=l},{}],8:[function(t,e,n){e.exports={Heap:t("heap"),Node:t("./core/Node"),Grid:t("./core/Grid"),Util:t("./core/Util"),DiagonalMovement:t("./core/DiagonalMovement"),Heuristic:t("./core/Heuristic"),AStarFinder:t("./finders/AStarFinder"),BestFirstFinder:t("./finders/BestFirstFinder")}},{"./core/DiagonalMovement":3,"./core/Grid":4,"./core/Heuristic":5,"./core/Node":6,"./core/Util":7,"./finders/AStarFinder":9,"./finders/BestFirstFinder":10,heap:1}],9:[function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||s.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=t.heuristic||s.manhattan:this.heuristic=t.heuristic||s.octile}var o=t("heap"),i=t("../core/Util"),s=t("../core/Heuristic"),a=t("../core/DiagonalMovement");r.prototype.findPath=function(t,e,n,r,s){var a,u,l,h,p,f,c,d,g=new o(function(t,e){return t.f-e.f}),v=s.getNodeAt(t,e),y=s.getNodeAt(n,r),b=this.heuristic,m=this.diagonalMovement,w=this.weight,M=Math.abs,A=Math.SQRT2;for(v.g=0,v.f=0,g.push(v),v.opened=!0;!g.empty();){if(a=g.pop(),a.closed=!0,a===y)return i.backtrace(y);for(u=s.getNeighbors(a,m),h=0,p=u.length;h<p;++h)l=u[h],l.closed||(f=l.x,c=l.y,d=a.g+(f-a.x===0||c-a.y===0?1:A),(!l.opened||d<l.g)&&(l.g=d,l.h=l.h||w*b(M(f-n),M(c-r)),l.f=l.g+l.h,l.parent=a,l.opened?g.updateItem(l):(g.push(l),l.opened=!0)))}return[]},e.exports=r},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}],10:[function(t,e,n){function r(t){o.call(this,t);var e=this.heuristic;this.heuristic=function(t,n){return 1e6*e(t,n)}}var o=t("./AStarFinder");r.prototype=new o,r.prototype.constructor=r,e.exports=r},{"./AStarFinder":9}]},{},[8])(8)});